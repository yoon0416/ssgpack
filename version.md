## ⚾ SSG Fan Community 프로젝트 업데이트 내역
> **마지막 업데이트 : 2025.04.23**

 - 업데이트는 메인 브런치 기준으로 함
   
📌 [트러블슈팅 목록 바로가기](https://github.com/yoon0416/ssgpack/blob/main/%ED%8A%B8%EB%9F%AC%EB%B8%94%EC%8A%88%ED%8C%85.md)  
📌 [버전 기록 보기](./version.md)

---

## 🥉 버전 나누는 기준

> 버전 명명 규칙은 [Semantic Versioning](https://semver.org/lang/ko/) 을 따름

• 버전 = 메이저(Major). 마이너(Minor). 패치(Patch)  
• 의미 = 큰 구조 변경 / 기능 추가 / 버그 수정

| 구분   | 의미                             | 예시 상황                           |
|--------|----------------------------------|--------------------------------------|
| Major  | 전체 구조 변경, 호환성 깨짐     | DB 리팩토링, API 구조 전면 수정 등   |
| Minor  | 새로운 기능 추가 (기존 기능 유지) | 관리자 페이지, 투표 기능 추가 등    |
| Patch  | 버그 수정, 기능 개선            | 권한 표기 오류, 시큐리티 조건 수정 등 |

---

## 📙 버전별 업데이트 내역

### SSG v1.0.0 (2025.04.20)
- 🔹 메인 브랜치 기준 첫 통합 버전
- 🔹 게시판(board) + 메인(main) 템플릿 연동
- 🔹 사용자 마이페이지 (`/user/mypage`) 구현
- 🔹 Spring Security 기반 사용자 인증/인가 구현
- 🔹 관리자 대시보드 (`/admin/dashboard`) 페이지 생성

---

### SSG v1.1.0 (2025.04.21)
- 🔹 게시판 댓글 기능 추가

---

### SSG v1.1.1 (2025.04.21)
- 🔹 게시판 접근 제어 로직 및 작성자만 수정/삭제 가능
- 🔹 `view.html` 병합 충돌 해결 및 푸터 짤림 수정

---

### SSG v1.2.0 (2025.04.21)
- 🔹 게시판 좋아요 기능 추가
- 🔹 좋아요 수 실시간 반영 및 로그인 여부에 따라 동작 분기
- 🔹 관리자 페이지에서도 좋아요 수 확인 가능

---

### SSG v1.3.0 (2025.04.22)
- 🔹 카카오 로그인(OAuth2) 도입 및 사용자 자동 가입 처리
- 🔹 `email`, `kakao_id` 유니크 설정 유지
- 🔹 `nick_name` 유니크 해제
- 🔹 로그인 성공 시 `SecurityContextHolder`에 사용자 수동 등록

---

### SSG v1.4.0 (2025.04.22)
- 🔹 **유저 관리자 페이지 구현**
  - `/admin/user/list`, `/view/{id}`, `/edit/{id}` 페이지 완성
  - 마스터 관리자 수정 제한 처리 (UI + 서버 예외 처리)
- 🔹 보안 설정 보완 (카카오 API Key 등 민감 정보 제거)
- 🔹 `header`, `footer` UI 변경

---

### SSG v1.5.0 (2025.04.23)
- 🔹 `header.html` UI 구조 개선 (상단 메뉴 통일)
- 🔹 선수 페이지 UI 개선
  - `player` 테이블에 `image_url` 컬럼 추가
  - 기본 이미지 표시 로직 적용
- 🔹 버튼 색상, 간격 등 공통 디자인 정리

---

### SSG v1.6.0 (2025.04.23)
- 🔹 **유저 관리자 페이지 개선**
  - 검색 기능 추가 (이메일, 닉네임)
  - 페이징 처리 (10명 단위, 조건 유지)
- 🔹 **비밀번호 재발급 기능 구현 (50%)**
  - 이메일 입력 시 랜덤 비밀번호 생성 + 암호화 저장
  - 이메일 API(Naver) 연동 예정
  - 카카오 유저 이메일 변경 유도

---
### SSG v1.7.0 (2025.04.23)
- 🔹 **게시판 페이지 개선**
  - 게시판 페이지 검색 기능 추가
  - 게시판 페이지 이미지 업로드 기능 추가
  - 게시판 페이지 페이징 처리 (10명 단위, 조건 유지)

---

### SSG v2.0.0 (2025.04.30)

> 🎉 로그인 구조 교체부터, 이메일/전화 인증, 로그 시스템, AI, 관리자 기능까지  

---

#### 🧩 1. 로그인 구조 전면 개편
- Spring Security 기본 로그인 제거
- 이메일/비밀번호 직접 검증 → `UserService` 처리
- 로그인 성공 시 `SecurityContextHolder` 수동 저장
- 로그인 경로 변경: `/user/login` (기존 `/login` 미작동)
- 로그인 실패 시 로그 기록 + 에러 메시지 전달


#### 👤 2. 사용자(User) 기능 확장
- `User` 엔티티 필드 추가:
  - `introduce`: 자기소개
  - `profile_img`: 프로필 이미지 파일명
  - `phone`: 전화번호
  - `email_chk`, `email_token`: 이메일 인증 관련
- 마이페이지 기능 분리:
  - `/user/mypage/edit`: 닉네임/이메일/소개글/프사 수정
  - `/user/password/change`: 비밀번호 변경 (현재 비번 확인 포함)
- 이메일/닉네임 수정 시 반드시 **현재 비밀번호 확인**
- 📸 **프사 업로드**: UUID + 경로 자동 생성
- 📱 **전화번호 인증 기능**
  - 인증된 번호만 저장 가능
  - 세션(`verifiedPhone`)에 임시 저장 후 반영
- 📧 **이메일 인증 기능**
  - 인증 메일 발송 (UUID 토큰 포함)
  - 인증 성공 시 `email_chk` = true 변경



#### 🔐 3. 비밀번호 재발급 기능 완성
- `/user/password-reset`에서 이메일 입력
- 해당 이메일 존재 시 → 임시 비밀번호 랜덤 생성
- 임시 비밀번호 `BCrypt` 암호화 후 DB 저장
- 원본 비밀번호는 Naver Mail API로 전송
- ❗ 무차별 공격 방지용 **세션 기반 본인 인증 로직** 포함
- 카카오 로그인 사용자는 이메일 수정 유도


#### 📝 4. 로그 시스템(LogUtil) 도입
- 모든 핵심 기능 로그 자동 기록
- 역할별 디렉토리:
  - `logs/user/`, `logs/admin/user/`, `logs/admin/board/` 등
- 날짜별 로그 파일(`yyyy-MM-dd.log`) 자동 생성
- Spring Scheduler 사용 → **30일 지난 로그 자동 삭제**


#### 🖼️ 5. 이미지 업로드 기능 추가
- 마이페이지 프사 업로드 기능 구현
- 저장 위치: `/static/images/userimage/`
- UUID 기반 파일명 처리
- 저장 경로 없을 시 자동 폴더 생성


#### 🛡️ 6. 관리자 기능 전체 구현
- 관리자 페이지 경로 분리:
  - `/admin/user/` : 유저 관리 (검색, 상세, 수정, 삭제)
  - `/admin/board/` : 게시판 관리 (공지사항 등록/수정/삭제)
  - `/admin/vote/` : 투표 관리 (생성/삭제)
  - `/admin/player/` : 선수 관리 (등록/수정/삭제)
  - `/admin/game/` : 경기일정 관리
  - `/admin/report/` : 신고 게시글 확인 및 조치
- 역할(Role) 기반 접근 제어 완비 (0=Master ~ 5=일반)


#### 🚨 7. 게시판 기능 확장 + 신고 기능 도입
- 공지사항 상단 고정 + 배경 강조 (관리자 작성시만)
- 감정 분석 결과 → 배경색 자동 적용
- 제목/작성자 기준 검색 기능 추가
- 게시글 페이징 (10개 단위 유지)
- 이모지/감정분석 유지한 상태로 수정 가능
- ✏️ **신고하기 기능**
  - 사용자: 게시글 하단에서 사유 입력 → 신고 가능
  - 신고 정보는 `Report` 테이블에 저장
  - 관리자: `/admin/report/list`에서 확인/삭제 가능


#### 🧾 8. 투표 기능 완성
- `/vote/list`, `/vote/detail/{id}`, `/vote/create`, `/vote/delete` 구성
- 투표 생성/삭제는 관리자만 가능 (`ROLE_MASTER`, `ROLE_VOTE_MANAGER`)
- 일반 유저는 참여 + 결과 확인만 가능
- 관리자 전용 페이지: `/admin/vote/**`로 분리


#### ⚾ 9. 선수 기능 추가
- `/player/list`: 모든 유저가 볼 수 있는 선수 목록
- `/admin/player/**`: 선수 등록/수정/삭제 가능
- AI 감정평가 실행 버튼 `/admin/player-summaries` 구현


#### 📅 10. 경기 요약 기능 추가
- `/game/today`: 오늘 경기 요약 자동 크롤링 및 표시
- 관리자 페이지에서 경기일정 관리 가능


#### 🌤️ 11. 날씨 기능 (기상청 초단기 API)
- `/weather`: 야구장 날씨 실시간 표시
- 기상청 API 연동 → 온도, 강수확률, 풍속 출력


#### 🧠 12. 감정 분석 기반 UI 개선
- 게시글 작성 시 감정 분석 실행 → 결과에 따라 배경색 적용
- 관리자 게시글 수정 시에도 감정 분석 재실행

---

### ✅ 총정리
- ✔️ 커스텀 로그인 구조 도입 (보안 강화)
- ✔️ 전화번호/이메일 인증 로직 도입
- ✔️ 게시판 이미지 업로드, 감정 분석, 신고 기능 완성
- ✔️ 관리자 기능 완전 분리 구현
- ✔️ 로그 시스템 + AI 기능 + 경기 요약 + 날씨까지 통합

