# ⚙️ SSGFC 프로젝트 보안 점검 정리

> **이 프로젝트는 국비 백엔드 과정의 첫 웹 프로젝트로, 실제 서비스에 필요한 기본적인 보안 요소들을 고려해 구현하였습니다.**  
> 너무 어려운 개념은 피하고, 실무에서 자주 사용하는 보안 방식 위주로 구성했습니다.

---

## 1. 비밀번호 재설정 기능 (보완 필요)
- **현재 상태**: 이메일만 입력해도 비밀번호가 새로 바뀜 → 이메일로 전송
- **문제점**: 본인 확인 없이 남의 비밀번호를 바꿀 수 있음 (장난 가능)
- **해결 방법**:
  - 인증번호를 이메일로 보내고, 확인한 후 변경되게 함
  - 하루에 몇 번만 가능하도록 제한
  - 누가 요청했는지 기록 남기기

---

## 2. 로그인 시도 제한 없음
- **문제점**: 아이디만 알면 비밀번호 계속 시도 가능 → 무작위 대입 위험
- **해결 방법**:
  - 비밀번호 5번 이상 틀리면 일정 시간 로그인 막기
  - 사람인지 확인하는 reCAPTCHA 도입

---

## 3. 자동 프로그램(봇) 방어 없음
- **문제점**: 자동으로 글쓰기, 회원가입, 비밀번호 재설정 시도 가능
- **해결 방법**:
  - 구글 reCAPTCHA 추가
  - 요청이 너무 많거나 비정상일 때 차단

---

## 4. XSS (스크립트 공격) 가능성
- **설명**: 게시판에 자바스크립트를 심으면 다른 사용자 브라우저에서 실행될 수 있음
- **방어 방법**:
  - 화면에 출력할 때 `th:text` 같은 자동 필터 사용
  - 위험한 경우 직접 글자 이스케이프 처리

---

## 5. SQL 인젝션
- **설명**: 입력값에 SQL 구문을 넣어서 DB를 조작하는 공격
- **현재 상태**: JPA 사용 중이라 기본적으로 안전
- **주의점**: 문자열 직접 조립하는 쿼리는 주의 필요

---

## 6. 세션 고정 위험
- **설명**: 로그인 전과 후 세션이 같으면, 다른 사람이 세션을 탈취할 수 있음
- **해결 방법**:
  - 로그인 성공 시 기존 세션 초기화

---

## 7. 탈퇴 후 세션 유지
- **설명**: 탈퇴해도 로그인 상태가 유지되면 위험함
- **해결 방법**:
  - 탈퇴 시 세션 완전 종료

---

## 8. 관리자 주소 예측 쉬움
- **설명**: `/admin/**` 형태는 너무 예측 가능
- **해결 방법**:
  - 관리자 페이지 접근을 IP나 추가 인증으로 제한
  - 관리자 행위도 로그 남기기

---

## 9. CSRF 보호 미확인
- **설명**: 사용자의 의도 없이 악성 요청이 전송될 수 있음
- **해결 방법**:
  - POST 요청에 CSRF 토큰을 포함

---

## 10. 권한 확인 누락 가능
- **설명**: 특정 주소에 role 체크가 빠졌을 수 있음
- **해결 방법**:
  - 전체 URL별로 접근 권한 재점검

---

## 11. 인증 안 된 유저는 기능 제한
- **현재 상태**: 이메일/전화/소셜 인증 안 하면 글쓰기, 댓글, 투표 불가
- **추가 내용**: 마이페이지에서 인증 유도 문구 출력

---

## 12. 로그 시스템 구성
- **경로**: logs/user/ / logs/admin/
- **기록 내용**:
  - 로그인, 회원가입, 탈퇴 등 모든 주요 기능 기록
  - 관리자 로그 따로 분리
  - 마스터 관리자 로그는 비공개 별도 저장
  - 로그가 변경되면 바로 이메일 전송

---

## 13. 유저 탈퇴 및 강제 삭제 정책
- **현재 상태**: 탈퇴/벤 시 DB에서 완전 삭제
- **개선 예정**:
  - 30일 동안은 탈퇴 상태로 보관
  - 게시판에는 “탈퇴한 회원”처럼 표시
  - 30일 후 진짜 삭제

---

## 사용한 보안 기술 요약

| 항목 | 내용 |
|------|------|
| 로그인 처리 | Spring Security + 커스텀 로그인 |
| 권한 설정 | Role(숫자 등급)으로 구분 |
| 비밀번호 | BCrypt로 암호화 저장 |
| 인증 방식 | 이메일, 전화번호, 카카오/구글/네이버 |
| 로그 기록 | 기능별 로그 파일 저장 + 관리자 별도 처리 |
| 보호 기능 | CSRF, XSS 대응, 세션 보호 등 |

---

## 앞으로 추가하면 좋은 보안 기능

- 관리자 이상행동 감지 (새벽 접속, 반복 탈퇴 등)
- 탈퇴 계정 30일 보관
- 파일 업로드 제한 (jpg, png 등만 허용)
- 비밀번호 재사용 방지
- Slack/이메일로 관리자 실시간 알림