<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragments/layout}">
<head>
    <title>SSG ëœë”ìŠ¤ ì»¤ë®¤ë‹ˆí‹°</title>

    <!-- âœ… Bootstrap í¬í•¨ (ë””ìì¸ìš©) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body>
<th:block layout:fragment="content">
    <!-- âœ… ì¡°íšŒìˆ˜ ë†’ì€ ì„ ìˆ˜ ì„¹ì…˜ -->
    <div class="top-player-section container">
      <div class="top-player-title">ğŸ”¥ ì¸ê¸° ì„ ìˆ˜</div>
      <div class="top-player-grid" id="top-player-grid"></div>
    </div>
    
    <div class="container mt-5">
        <div class="main-grid">


			
			<div class="left-box">
			  <h3>ğŸ“° ìµœì‹  KBO ë‰´ìŠ¤</h3>
			
			  <!-- news.html íŒŒì¼ì˜ fragment ì‚½ì… -->
			  <div th:replace="news :: news-fragment"></div>
			</div>


            <!-- ì˜¤ë¥¸ìª½ ê³µê°„ -->
            <div class="right-box">

                <!-- âœ… ì¸ê¸°ê¸€ ì¶œë ¥ ì˜ì—­ -->
                <div class="popular-board">
                    <div class="popular-board-title">ğŸ”¥ ì¸ê¸°ê¸€</div>
                    <table class="table table-sm table-hover">
                        <tbody>
                        <tr th:each="board : ${popularBoards}">
                            <td>
                                <a th:href="@{'/board/view/' + ${board.id}}" th:text="${board.title}">ê²Œì‹œê¸€ ì œëª©</a>
                                <div class="text-muted" style="font-size: 0.8rem;">
                                    ì¡°íšŒìˆ˜ <span th:text="${board.hit}"></span> Â· ì¢‹ì•„ìš” <span th:text="${board.likes.size()}"/>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

				<!-- âœ… latestVoteê°€ ìˆì„ ê²½ìš°ì—ë§Œ ì œëª©ê³¼ ì´ë¯¸ì§€ ì¶œë ¥ -->
				<div class="right-lower-box" th:if="${latestVote != null}">
				    <h4 class="fw-bold" th:text="${latestVote.title}">ìµœì‹  íˆ¬í‘œ ì œëª©</h4>
				
				    <!-- âœ… ì´ë¯¸ì§€ ì¶œë ¥ (ìˆì„ ê²½ìš°) -->
				    <img th:if="${latestVote.img != null}"
				         th:src="@{'/images/vote/' + ${latestVote.img}}"
				         class="img-fluid rounded mb-2"
				         alt="íˆ¬í‘œ ì´ë¯¸ì§€"
				         style="max-height: 150px; object-fit: cover;">
				
				    <!-- âœ… ì„ íƒì§€ ë¦¬ìŠ¤íŠ¸ -->
				    <ul class="list-group list-group-flush" th:if="${latestVoteOptions != null}">
				        <li class="list-group-item"
				            th:each="opt : ${latestVoteOptions}"
				            th:text="${opt.content}"
				            th:onclick="'location.href=\'/vote/' + ${latestVote.id} + '\';'"
				            style="cursor: pointer;"></li>
				    </ul>
				</div>

            </div>
        </div>
    </div>
</th:block>



<th:block layout:fragment="script">
<script>
document.addEventListener('DOMContentLoaded', function() {
  fetch('/api/players/top-hit?limit=5')
    .then(response => response.json())
    .then(players => {
      const topPlayersList = document.getElementById('top-player-grid');
      topPlayersList.innerHTML = '';

      players.forEach(player => {
        const photoUrl = `/images/players/${player.backNumber}.png`;
        const card = document.createElement('div');
        card.className = 'player-card';
        card.innerHTML = `
          <a href="/players/${player.pno}">
            <img src="${photoUrl}" alt="${player.name}" class="player-image">
            <div class="player-info">
              <h3>${player.name}</h3>
              <p>ì¡°íšŒìˆ˜: ${player.viewCount}</p>
            </div>
          </a>
        `;
        topPlayersList.appendChild(card);
      });
    })
    .catch(err => {
      console.error("ğŸ”¥ ì¸ê¸° ì„ ìˆ˜ ë¡œë”© ì‹¤íŒ¨:", err);
    });
});
</script>
</th:block>



</body>
</html>
