<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragments/layout}">
<head>
<title>ì‚¬ìš©ì ê´€ë¦¬ì í˜ì´ì§€</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Honk&display=swap" rel="stylesheet">
</head>
<body>
	<th:block layout:fragment="content">
		<div class="container mt-5">
			<h2 class="mb-4">ğŸ‘¥ ì‚¬ìš©ì ëª©ë¡</h2>

			<!-- ê²€ìƒ‰ í¼ -->
			<form method="get" th:action="@{/admin/user/list}"
				class="row g-3 mb-4">
				<div class="col-auto">
					<input type="text" class="form-control" name="keyword"
						placeholder="ë‹‰ë„¤ì„ or ì´ë©”ì¼ ê²€ìƒ‰" th:value="${keyword}"
						style="max-width: 200px; display: inline-block;">
					<button type="submit" class="btn btn-outline-dark ms-2">ê²€ìƒ‰</button>

				</div>
			</form>

			<!--  ìœ ì € í…Œì´ë¸” -->
			<table
				class="table table-bordered table-hover align-middle text-center">
				<thead class="table-light">
					<tr>
						<th>ID</th>
						<th>ì´ë©”ì¼</th>
						<th>ë‹‰ë„¤ì„</th>
						<th>ê°€ì…ì¼</th>
						<th>ê¶Œí•œ</th>
						<th>IP</th>
						<th>ê´€ë¦¬</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="user : ${userList}">
						<td th:text="${user.id}">1</td>
						<td th:text="${user.email}">email@example.com</td>
						<td th:text="${user.nick_name}">ë‹‰ë„¤ì„</td>
						<td th:text="${#temporals.format(user.createDate, 'yyyy-MM-dd')}">2025-04-22</td>
						<td><span th:switch="${user.role}"> <span th:case="0">ë§ˆìŠ¤í„°
									ê´€ë¦¬ì</span> <span th:case="1">ìœ ì € ê´€ë¦¬ì</span> <span th:case="2">ì„ ìˆ˜
									ê´€ë¦¬ì</span> <span th:case="3">ê²Œì‹œíŒ ê´€ë¦¬ì</span> <span th:case="4">ê²½ê¸°ì¼ì •
									ê´€ë¦¬ì</span> <span th:case="5">ì¼ë°˜ ì‚¬ìš©ì</span> <span th:case="*">ì•Œ
									ìˆ˜ ì—†ìŒ</span>
						</span></td>
						<td th:text="${user.ip}">192.168.0.1</td>
						<td>
							<div th:if="${user.role != 0}">
								<a th:href="@{'/admin/user/view/' + ${user.id}}"
									class="btn btn-sm btn-outline-primary">ìƒì„¸</a>
								<form th:action="@{'/admin/user/delete/' + ${user.id}}"
									method="post" style="display: inline;"
									onsubmit="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">
									<button type="submit" class="btn btn-sm btn-outline-danger">ì‚­ì œ</button>
								</form>
							</div>
							<div th:if="${user.role == 0}" class="text-muted small">ìˆ˜ì •
								ë¶ˆê°€</div>
						</td>
					</tr>
				</tbody>
			</table>

			<!--  í˜ì´ì§• -->
			<style>
.pagination .page-link {
	color: #333;
	border: 1px solid #ccc;
	background-color: #f8f9fa;
}

.pagination .page-item.active .page-link {
	background-color: #e0e0e0;
	border-color: #999;
	color: #000;
	font-weight: bold;
}

.pagination .page-link:hover {
	background-color: #ddd;
	color: #000;
}

.pagination .page-item.disabled .page-link {
	color: #aaa;
	background-color: #f1f1f1;
}
</style>

			<nav aria-label="Page navigation">
				<ul class="pagination justify-content-center mt-4">
					<!-- ì´ì „ ë²„íŠ¼ -->
					<li class="page-item"
						th:classappend="${currentPage == 0} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/user/list(page=${currentPage - 1}, keyword=${keyword})}">ì´ì „</a>
					</li>

					<!-- í˜ì´ì§€ ë²ˆí˜¸ -->
					<li class="page-item"
						th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
						th:classappend="${currentPage == i} ? 'active'"><a
						class="page-link"
						th:href="@{/admin/user/list(page=${i}, keyword=${keyword})}"
						th:text="${i + 1}">1</a></li>

					<!-- ë‹¤ìŒ ë²„íŠ¼ -->
					<li class="page-item"
						th:classappend="${currentPage + 1 >= totalPages} ? 'disabled'">
						<a class="page-link"
						th:href="@{/admin/user/list(page=${currentPage + 1}, keyword=${keyword})}">ë‹¤ìŒ</a>
					</li>
				</ul>
			</nav>



		</div>
	</th:block>
</body>
</html>
