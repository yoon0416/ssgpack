# SSGFC 프로젝트 보안 설계서 (일반 게시판플젝도 ㅁ독같이

설계자: [작성자 이름 기입]  
컨셉: **"공격을 허용하고, 분석하고, 제거하고, 살아남는 시스템"**

---

## 1. 보안 중심 설계 철학

- 기능보다 **보안 시나리오를 우선 설계**하는 구조
- **공격자 행동 예측 → 유도 → 분석 → 봉쇄 → 복구**의 전체 사이클 설계
- Spring Boot(Java) 서버에 **보안 역량 집중**
- React + Node.js는 프론트엔드로, **최소한의 보안 처리만 반영**

---

## 2. 주요 구성 요소

### [1] 사용자 인증·인가

- 이메일 / 전화번호 인증
- 소셜 로그인 연동 (Kakao, Google 등)
- 로그인 실패 횟수 제한
- 로그인 시도 IP, 시간 기록

### [2] 상세 로그 시스템

- LogUtil 기반 날짜별 로그 저장 (`logs/user/yyyy-MM-dd.log`)
- 로그 분리: `user`, `admin`, `fake`
- 관리자 기능 접근 모두 기록
- 로그 암호화 및 보관 정책 적용 예정

### [3] 침입자 대응 시나리오

- fake 관리자 로그인 시스템 존재
- 공격자 유인 → 조작된 관리자 UI 노출
- 실제 DB와 분리된 **fakeDB** 작동
- 행동 기록 → 자동 분석
- 비정상 삭제/권한 변경 시 이메일 알림 + 로그 저장

### [4] 트랩 및 이상행동 분석

- 심리적 유도 기반 트랩 시스템
- 비정상 버튼 클릭, 속도, 접근 경로 기록
- 동의 기반 fake 기능으로 침입자 감지

### [5] 자동 봉쇄 및 복구

- 이상행위 탐지 시:
  - 관리자 계정 잠금 + 랜덤화
  - 전체 로그 백업 + 메일 전송
  - DB 일부 암호화 및 복구 자동 시도

---

## 3. 알림 시스템

- 중요 행동(삭제/권한변경/이상로그) 시 **보안 관리자에게 실시간 이메일 전송**
- 추후 Slack, Telegram 등의 **실시간 알림 연동** 예정

---

## 4. 시각화 / 관리자 뷰

- 보안 관리자 전용 로그 시각화 페이지
- Chart.js, Table 기반 UI 구성
- **일반 관리자와 마스터는 접근 불가**

---

## 5. 역할 기반 권한 설계

- 0 = 마스터  
- 1 = 유저 관리자  
- 2 = 보안 관리자 등

- 역할별 권한/로그 접근/정지 권한 분리
- 보안 관리자는 관리자 정지 가능 (마스터 제외)
- 마스터는 전체 기능 사용 가능, 단 **보안 관리자 영역 제외**

---

## 6. 실제 공격 시나리오 대응 흐름

### ▶ 시나리오 A: 관리자 권한 탈취 시도

1. fake 관리자 ID 로그인
2. 조작된 관리자 UI 접근
3. 권한 부여/삭제 수행 → 모두 fake DB에 기록
4. 알림 + 로그 저장 (실제 DB는 변경 없음)

### ▶ 시나리오 B: 반복 로그인 시도

1. 같은 IP에서 다수 실패
2. 자동 로그 생성 → 관리자 시각화 뷰 표시
3. 일정 횟수 초과 시 로그인 차단

### ▶ 시나리오 C: 데이터 훼손 시도

1. 비정상 삭제/변경 감지
2. DB 암호화 → 접근 제한
3. 복구 절차 시작 + 관리자 메일 발송

---

## 7. 침입 대응 시나리오 (Step 1~3)

### [STEP 1] 침입 탐지 및 분기

1. 로그인 요청 → user.db → 없으면 fake.db 조회
2. fake ID 존재 시 → 관리자 UI 리디렉션
3. 모든 조작 fake DB에만 반영
4. 관리자에게 알림 + 인증된 계정 무작위 초기화

---

### [STEP 2] 행동 분석 및 봉쇄 트리거

1. 침입자는 실제처럼 행동  
   → 유저 삭제/권한 변경/글쓰기 등
2. 로그 분석 (자동 + 수동 병행)
3. 봉쇄 조건:
   - 보안 관리자 + 마스터 **동시 승인**
4. 봉쇄 시:
   - 유저 DB 암호화 및 개인정보 초기화
   - 비밀번호 랜덤화 + 전 유저 알림
   - 공격자에게는 "서버 오류" 메시지로 위장

---

### [STEP 3] 복구 및 재가동

1. clean DB 및 로그 기반 복구
2. AWS 인스턴스 교체 또는 재시작
3. 유저 재로그인 시 인증 절차 재시도
4. 공식 입장:
   - 공격자에겐 장애로 보이게 설계
   - 유저에게는 이메일 + 전체 공지

---

## 8. 핵심 철학 요약

> “침입을 허용했다.  
> 그 대신, 모든 걸 보았고,  
> 그가 무엇을 하려 했는지도 기록했다.  


---

## 9. 추가 보안 전략

### ● 국가기관 연계

- 이상 탐지 시 KISA, 사이버안전센터 등 자동 신고 구조 내포

### ● 유지비용 고려

- AWS 요금, 도메인/인스턴스 파기 고려 포함

### ● 민감정보 보호 우선

- 유출 가능성보다 사전 삭제/암호화가 법적 방어책이 될 수 있음 (GDPR, CCPA 기준)

---

## 10. 예정 기능 및 고급 설계

### ● 로그 위변조 방지

- 로그마다 UUID + Hash(SHA256/HMAC) 기반 서명 삽입
- 열람 시 검증 로직 적용 → 위변조 탐지

### ● 로그 보관 및 파기 정책

| 로그 종류      | 보관 기간 |
|----------------|-----------|
| 일반 로그      | 30일      |
| 민감 로그      | 180일     |
| 시스템 로그    | 1년       |

→ 자동 파기 + 주기적 백업 로직 예정

### ● 키 관리 시스템

- OTP 기반 이중 인증
- 관리 키 파일 분산 보관
- 자동 만료 및 인증 주기 갱신 시스템

### ● 통합 알림 시스템

- 이상 로그 발생 시: Slack / Email / Telegram 연동
- 관리자별 분기 알림 라우팅 적용

### ● 자동화 스크립트 구축

- DB 백업, 인스턴스 파기, 재배포, 이메일/Slack 알림 등 자동 실행 스크립트화

### ● 봇 감지 및 대응

- 로그인/CRUD 인터랙션 기반 봇 탐지
- UI/UX 흐름 랜덤화 및 인터벌 기반 회피 설계

---

## 최종 요약

- **기능보다 보안**, **봉쇄보다 분석**, **공격보다 복구**를 중시
- **“살아남는 시스템”**으로의 진화를 목표로 한 실전형 보안 설계